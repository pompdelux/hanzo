{% extends layout %}

{% block meta %}
  {{ meta_tags('robots') }}
  <meta name="robots" content="noindex,nofollow">
{% endblock %}

{% block content %}

  <h1>{{ 'buy.set'|trans }}</h1>


  {% for product in products %}
    <article class="block row grid_8">
      <div class="grid_2 alpha">
        <a href="{{ product.url }}" class="left">
          {{ product_image_tag(product.image, '234x410', {'alt': product.master ~ ', ' ~ product.color}) }}
        </a>
      </div>
      <div class="grid_2">

      <h2>{{ product.master }}</h2>
        <div class="prices">
        {% if product.prices.sales is defined %}
          <span class="normal strike">{{ product.prices.normal.price|money }}</span>
          <span class="discount">{{ product.prices.sales.price|money }}</span>
        {% else %}
          <span class="normal">{{ product.prices.normal.price|money }}</span>
        {% endif %}
        </div>

        <form class="buy" action="{{ path('basket_add') }}">
        {% if product.out_of_stock %}
          {{ 'out.of.stock'|trans }}
        {% else %}
          <div class="options">
            <label for="size">
              <span>{{ 'size'|trans }}</span>
              <select name="size" class="size">
                <option value="">{{ 'choose'|trans }}</option>
              {% for size in product.sizes %}
                <option value="{{ size.value }}" {{ not size.in_stock ? 'disabled="disabled"' : '' }} >{{ size.value }}</option>
              {% endfor %}
              </select>
            </label>
            <label for="color">
              <span>{{ "color"|trans }}:</span>
              <select name="color" class="color" disabled="disabled">
                <option value="">{{ 'choose'|trans }}</option>
                {% for color in product.colors %}
                  <option value="{{ color }}">{{ color }}</option>
                {% endfor %}
              </select>
            </label>
            <label for="quantity" class="off">
              <span>{{ "quantity"|trans }}:</span>
              <select class="quantity" name="quantity">
              {% for i in 1..10 %}
                <option value="{{ i }}">{{ i }}</option>
              {% endfor %}
              </select>
            </label>
          </div>

          <input type="submit" value="{{ "add.to.basket"|trans }}" class="button button-right button-black">
          <input type="hidden" name="master" value="{{ product.master }}">
        {% endif %}
        </form>
      </div>

    </article>
  {% else %}
    huh ?!?
  {% endfor %}

<div class="grid_8 alpha omega">
  <a href="javascript: history.go(-1);" class="button button-left">{{ 'button.back'|trans }}</a>
  <a href="{{ url('basket_view', {'_locale' : app.request.locale}) }}" class="button button-right proceed">{{ "proceed"|trans({}, 'checkout') }}</a>
</div>

{% endblock %}
