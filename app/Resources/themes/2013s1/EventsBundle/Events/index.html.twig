{% extends layout %}

{% block content %}
<nav class="grid_2 alpha sub-menu menu">
    <ul>
        <li>
            <a href="{{ path('events_create') }}">
                {{ 'events.create_event.link'|trans({}, 'events') }}
            </a>
        </li>
        {% if archived_events|length > 0 %}
        <li id="select-archived-events">
            <a class="open-menu" href="#">
                {{ 'events.calendar.archived.header.text'|trans({}, 'events') }}
            </a>
            <div style="display:none;" class="dropdown">
                <ul id="archived-events">
                    {% for archived_event in archived_events %}
                    <li><a href="{{ path('events_view' , {'id' : archived_event.id }) }}">( {{ archived_event.eventdate|date("d/m-Y")}} ) - {{ archived_event.host }} - {{ archived_event.code }}</a></li>
                    {% endfor %}
                </ul>
            </div>
        </li>
        {% endif %}
    </ul>
</nav>
<div class="grid_6 omega">
    <h1>{{ 'events.calendar.header.text'|trans({}, 'events') }}</h1>

    {% for message in app.session.flashbag.get('notice') %}
    <div class="message notice">
        {{ message|trans({}, 'events') }}
    </div>
    {% endfor %}


    <p>{{ 'events.calendar.description.text'|trans({}, 'events') }}</p>
    <div id="calendar"></div>
</div>

{% endblock %}

{% block javascript %}
<script src="/fx/scripts/fullcalendar/fullcalendar.js"></script>
<script type="text/javascript">
    $(document).ready(function(){
        $('#calendar').fullCalendar({
                firstDay: 1,
                events: base_url+ 'events/getevents',
                timeFormat: 'H:mm',
                monthNames: [
                        Translator.get('js:month.Januar'),
                        Translator.get('js:month.February'),
                        Translator.get('js:month.March'),
                        Translator.get('js:month.April'),
                        Translator.get('js:month.May'),
                        Translator.get('js:month.June'),
                        Translator.get('js:month.July'),
                        Translator.get('js:month.August'),
                        Translator.get('js:month.September'),
                        Translator.get('js:month.October'),
                        Translator.get('js:month.November'),
                        Translator.get('js:month.December')
                ],
                dayNamesShort: [
                        Translator.get('js:day.short.Sun'),
                        Translator.get('js:day.short.Mon'),
                        Translator.get('js:day.short.Tue'),
                        Translator.get('js:day.short.Wed'),
                        Translator.get('js:day.short.Thu'),
                        Translator.get('js:day.short.Fri'),
                        Translator.get('js:day.short.Sat')
                ],
                buttonText: {
                        today:    Translator.get('js:today'),
                }
        });
    });
</script>
{% endblock %}
